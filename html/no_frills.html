<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
       "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Command line</title>
</head>
<body style="font-family:sans-serif">

<a href="index.html">Overpass API</a> &gt;

<h1>Quick installation guide</h1>

<p>We give here an installation guide for installing and starting the most common components. For other components, see the <a href="detailed_installation.html">detailed installation guide</a>. There is also <a href="http://wiki.openstreetmap.org/wiki/OSM3S/install">an installation guide on the wiki</a> which covers more errors that have ever been occured during installation and startup.</p>

<p>We do cover here various base systems, in particular at least Ubuntu Linux and FreeBSD.</p>


<h2>Outline</h2>

<p>We first give a complete list of commands you need for installation and startup:</p>

<p><a href="#required">Install required software packages (on Ubuntu)</a>:</p>
<pre>sudo apt-get install wget g++ make expat libexpat1-dev</pre>

<p><a href="#install">Install the Overpass API software</a>:</p>
<pre>../src/configure --prefix=&quot;`pwd`/../&quot;
make CXXFLAGS=&quot;-O3&quot; install</pre>

<p><a href="#startup">Import a planet file and configure minutely updates:</a></p>
<pre>wget -O planet.osm.bz2 &quot;http://ftp.heanet.ie/mirrors/openstreetmap.org/planet-latest.osm.bz2&quot;
../src/bin/init_osm3s.sh planet.osm.bz2 &quot;../db/&quot; &quot;../&quot; --meta</pre>


<a name="required"><h2>Requirements</h2></a>

<p>With a POSIX confirming operating system (this includes all kinds of Linux as well as FreeBSD, OpenBSD and several others), you have already fulfilled most base requirements.</p>

<p>Concerning hardware, I suggest at least 1 GB of RAM. The more RAM ist available, the better, because caching of disk content in the RAM will significantly speed up Overpass API. The processor speed will have little relevance. For the hard disk, it depends on what you want to install. A full planet database with minutely updates should have at least 150 GB auf hard disk space at disposal. Without minute diffs and meta data, 50 GB would already suffice.</p>

<p>To automatically download diffs files, you need a command line downloading tools. I suggest <em>wget</em>. If it is not already installed, you can get it on e.g. Ubuntu with:</p>
<pre>sudo apt-get install wget</pre>
<p>If you want to use another program instead of wget, you can find an explanation in <a href="detailed_installation.html">the detailed installation guide</a>.</p>

<p>To compile the software, you need a C++ compiler and <em>make</em>. I suggest <em>the GCC collection</em>. If it is not already installed, you can get it on e.g. Ubuntu with:</p>
<pre>sudo apt-get install g++ make</pre>

<p>To compile the software, you also need the <em>expat</em> library. If it is not already installed, you can get it on e.g. Ubuntu with:</p>
<pre>sudo apt-get install expat libexpat1-dev</pre>
<p>You can also include expat from sources. Please have a look in <a href="detailed_installation.html">the detailed installation guide</a>.</p>
nohup make LDFLAGS=&quot;-static -L/home/roland/expat-2.0.1/lib/&quot; install


<a name="install"><h2>Software Installation</h2></a>

<p>You need to choose a directory where you put the executable files. You can later move them to a different directory. But the default choice of the installation program <em>automake</em>, /usr/bin, requires root permissions, although no root permissions are really necessary to run the program. I suggest the parent directory of the source code directory: this can be reached with &quot;`pwd`/../&quot;. To configure this output directory and detect necessary adaptions of your system, run in the <em>build</em> subdirectory:</p>
<pre>../src/configure --prefix=&quot;`pwd`/../&quot;</pre>

<p>Generate the executables:</p>
<pre>make CXXFLAGS=&quot;-O3&quot; install</pre>
<p>Other system than Linux may require here some extra parameters. For example, FreeBSD needs <em>-DNATIVE_LARGE_FILES</em>, because it doesn't have a separate <em>open64</em> function:
<pre>make CXXFLAGS=&quot;-O3&quot; <strong>CPPFLAGS=&quot;-DNATIVE_LARGE_FILES&quot;</strong> install</pre>


<a name="startup"><h2>Startup</h2></a>

<p>The standard use case is to set up the database with the whole planet data and including meta data. If you haven't downloaded an <a href="http://wiki.openstreetmap.org/wiki/Planet.osm">OSM XML planet file</a> yet, you can fetch one for example with:</p>
<pre>wget -O planet.osm.bz2 &quot;http://ftp.heanet.ie/mirrors/openstreetmap.org/planet-latest.osm.bz2&quot;</pre>
<p>This file has a size of more than 20 GB. Thus, depending on your internet connection, it may take between 4 hours (fastest possible) and 22 hours (with 2 MBit) to download the file. If you are not working on your local machine, you may want the download to continue even if you logout. Use <em>nohup</em> for this:</p>
<pre><strong>nohup</strong> wget -O planet.osm.bz2 &quot;http://ftp.heanet.ie/mirrors/openstreetmap.org/planet-latest.osm.bz2&quot; <strong>&amp;</strong></pre>

<p>Once you have the file, you can start the input. The import again may take up to 48 hours:</p>
<pre>../src/bin/init_osm3s.sh planet.osm.bz2 &quot;../db/&quot; &quot;../&quot; --meta</pre>
<p>or</p>
<pre>nohup ../src/bin/init_osm3s.sh planet.osm.bz2 &quot;../db/&quot; &quot;../&quot; --meta &amp;</pre>
<p>You may need to adapt the parameter: The first parameter <em>planet.osm.bz2</em> is the osm file to process, the second parameter <em>&quot;../db/&quot;</em> is the directory where the database should go to, and the third parameter <em>&quot;../&quot;</em> is the base directory of the executables, i.e. there must exist <em>update_database</em> in the subdirectory <em>bin</em> of the location where the third parameter points to.</p>

<!--<p>The standard use case is to set up the database with the whole planet data and including meta data. This is the most time-consuming part and will take up to 48 hours:</p>
<pre>wget -O planet.osm.bz2
mkdir &quot;`pwd`/../db/&quot;
bunzip2 &lt;planet.osm.bz2 | ../bin/update_database --db-dir=&quot;`pwd`/../db/&quot; --meta</pre>
<p>You may need to replace <em>&quot;`pwd`/../db/&quot;</em> by the directory where you want your database be written to and to replace <em>../bin/</em> by the <em>bin</em> subdirectory of the directory where you have installed the executables to.</p>

<p>You can also use any other osm file. If you want to save hard disk space and reduce the startup and update time, you can omit meta data by omitting the <em>--meta</em> parameter.</p>

<p>The command is complete if it writes <em>Update complete.</em> to the console.</p>-->

<p>When this command is done, it writes <em>Update complete.</em> to the console (or to the file <em>nohup.out</em> if you have used <em>nohup</em>). At this point you could use the database </p>

<p>Minute updates ...</p>

</body>
</html>
